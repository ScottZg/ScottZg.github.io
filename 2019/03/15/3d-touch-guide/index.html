<!DOCTYPE html><html lang="zh-Hans"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="default" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>你想知道的3D Touch开发全在这里了 | 我不是掌柜</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = 'https://hm.baidu.com/hm.js?' + 'bedfe77e6747a86ea485d0b5e0839981';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();
  </script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">你想知道的3D Touch开发全在这里了</h1><a id="logo" href="/.">我不是掌柜</a><p class="description">一个iOS开发工程师</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">你想知道的3D Touch开发全在这里了</h1><div class="post-meta">Mar 15, 2019</div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">Inhalte</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#前言"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#正文"><span class="toc-number">2.</span> <span class="toc-text">正文</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#判断3D-Touch是否可用"><span class="toc-number">2.1.</span> <span class="toc-text">判断3D Touch是否可用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3D-Touch-and-Trait-Collections"><span class="toc-number">2.2.</span> <span class="toc-text">3D Touch and Trait Collections</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Home-screen-quick-action-API（主屏幕交互）"><span class="toc-number">2.3.</span> <span class="toc-text">Home screen quick action API（主屏幕交互）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#用例"><span class="toc-number">2.3.1.</span> <span class="toc-text">用例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#代码实例"><span class="toc-number">2.3.2.</span> <span class="toc-text">代码实例</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Static-quick-actions"><span class="toc-number">2.3.2.1.</span> <span class="toc-text">Static quick actions</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Dynamic-quick-actions"><span class="toc-number">2.3.2.2.</span> <span class="toc-text">Dynamic quick actions</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#核心类说明"><span class="toc-number">2.3.3.</span> <span class="toc-text">核心类说明</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#UIApplicationShortcutItem"><span class="toc-number">2.3.3.1.</span> <span class="toc-text">UIApplicationShortcutItem</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#UIApplicationShortcutIcon"><span class="toc-number">2.3.3.2.</span> <span class="toc-text">UIApplicationShortcutIcon</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#系统自带类型"><span class="toc-number">2.3.3.2.1.</span> <span class="toc-text">系统自带类型</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#用户自定义"><span class="toc-number">2.3.3.2.2.</span> <span class="toc-text">用户自定义</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用方式"><span class="toc-number">2.3.4.</span> <span class="toc-text">使用方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#个数限制"><span class="toc-number">2.3.5.</span> <span class="toc-text">个数限制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用场景"><span class="toc-number">2.3.6.</span> <span class="toc-text">使用场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UIKit-peek-and-pop-API-预览和跳转"><span class="toc-number">2.4.</span> <span class="toc-text">UIKit peek and pop API(预览和跳转)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#快速操作"><span class="toc-number">2.4.1.</span> <span class="toc-text">快速操作</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#UIPreviewAction"><span class="toc-number">2.4.1.1.</span> <span class="toc-text">UIPreviewAction</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#UIPreviewActionItem"><span class="toc-number">2.4.1.2.</span> <span class="toc-text">UIPreviewActionItem</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#UIPreviewActionGroup"><span class="toc-number">2.4.2.</span> <span class="toc-text">UIPreviewActionGroup</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Web-view-peek-and-pop-API"><span class="toc-number">2.5.</span> <span class="toc-text">Web view peek and pop API</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UITouch-force-properties"><span class="toc-number">2.6.</span> <span class="toc-text">UITouch force properties</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#参考文档"><span class="toc-number">3.</span> <span class="toc-text">参考文档</span></a></li></ol></div></div><div class="post-content"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>iPhone 6s和iPhone 6s Plus为多点触摸界面带来了强大的3D触摸新维度。这项新技术可以感知用户按下显示屏的深度，让他们比以往任何时候都更能使用你的应用程序和游戏。更多关于3D Touch的介绍可以参见<a href="https://developer.apple.com/ios/3d-touch/" target="_blank" rel="noopener">这里</a>。  </p>
<h2 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h2><p>接下来会介绍一下所有关于3D Touch开发的一些内容。  </p>
<h3 id="判断3D-Touch是否可用"><a href="#判断3D-Touch是否可用" class="headerlink" title="判断3D Touch是否可用"></a>判断3D Touch是否可用</h3><p>先判断设备是否支持3D Touch，这里主要用到的类是：<a href="https://developer.apple.com/documentation/uikit/uitraitcollection?language=objc" target="_blank" rel="noopener">UITraitCollection</a>。在iOS9之后，可以使用该类判断设备是否支持3D Touch，苹果官方说明如下：  </p>
<blockquote>
<h3 id="3D-Touch-and-Trait-Collections"><a href="#3D-Touch-and-Trait-Collections" class="headerlink" title="3D Touch and Trait Collections"></a>3D Touch and Trait Collections</h3><p>Starting in iOS 9, you can use this class to check whether the device on which your app is running supports 3D Touch. Read the value of the <a href="https://developer.apple.com/documentation/uikit/uitraitcollection/1623515-forcetouchcapability?language=objc" target="_blank" rel="noopener"><code>forceTouchCapability</code></a> property on the trait collection for any object in your app with a trait environment. For information about trait environments, see <a href="https://developer.apple.com/documentation/uikit/uitraitenvironment?language=objc" target="_blank" rel="noopener"><code>UITraitEnvironment</code></a>. For the possible values of the force touch capability property, see the <a href="https://developer.apple.com/documentation/uikit/uiforcetouchcapability?language=objc" target="_blank" rel="noopener"><code>UIForceTouchCapability</code></a> enumeration.</p>
<p>Because a user can turn off 3D Touch in Settings, check the value of the <a href="https://developer.apple.com/documentation/uikit/uitraitcollection/1623515-forcetouchcapability?language=objc" target="_blank" rel="noopener"><code>forceTouchCapability</code></a> property in your implementation of the <a href="https://developer.apple.com/documentation/uikit/uitraitenvironment/1623516-traitcollectiondidchange?language=objc" target="_blank" rel="noopener"><code>traitCollectionDidChange:</code></a>method, and adjust your code paths according to the property’s value.</p>
</blockquote>
<p>主要是使用了forceTouchCapability属性，该属性的枚举值包括：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//未知</span><br><span class="line">UIForceTouchCapabilityUnknown = 0,</span><br><span class="line">//不可用</span><br><span class="line">UIForceTouchCapabilityUnavailable = 1,</span><br><span class="line">//可用</span><br><span class="line">UIForceTouchCapabilityAvailable = 2</span><br></pre></td></tr></table></figure>
<p>用户在使用APP的时候也有可能在设置中关闭3D Touch，这个时候可以实现traitCollectionDidChange:代理方法去监听是否改变：(在VC中实现UITraitEnvironment协议)  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark - UITraitEnvironment</span><br><span class="line">- (void)traitCollectionDidChange:(UITraitCollection *)previousTraitCollection &#123;</span><br><span class="line">    if (previousTraitCollection.forceTouchCapability == UIForceTouchCapabilityAvailable) &#123;</span><br><span class="line">        [self showAlertWithStrig:@&quot;3D Touch已关闭&quot;];</span><br><span class="line">    &#125;else if (previousTraitCollection.forceTouchCapability == UIForceTouchCapabilityUnavailable) &#123;</span><br><span class="line">        [self showAlertWithStrig:@&quot;3D Touch已打开&quot;];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里注意：<strong>拿到的traitcollection是previousTraitCollection</strong>。  </p>
<h3 id="Home-screen-quick-action-API（主屏幕交互）"><a href="#Home-screen-quick-action-API（主屏幕交互）" class="headerlink" title="Home screen quick action API（主屏幕交互）"></a>Home screen quick action API（主屏幕交互）</h3><p>该API主要用于添加应用程序图片的快捷方式，以预测并加速用户与应用的互动。  </p>
<h4 id="用例"><a href="#用例" class="headerlink" title="用例"></a>用例</h4><p><img src="https://raw.githubusercontent.com/ScottZg/MarkDownResource/feature/addrubyimagefile/3DTouch/hsqa-demo.png" alt="Demo"></p>
<h4 id="代码实例"><a href="#代码实例" class="headerlink" title="代码实例"></a>代码实例</h4><p>两种方法实现该特性，直接使用代码开发，或者直接在Info.plist文件配置。  </p>
<h5 id="Static-quick-actions"><a href="#Static-quick-actions" class="headerlink" title="Static quick actions"></a>Static quick actions</h5><p>直接在application:didFinishLaunchingWithOptions:方法中处理：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions &#123;</span><br><span class="line">     </span><br><span class="line">    NSMutableArray *shortCutItemArr = [NSMutableArray arrayWithCapacity:4];</span><br><span class="line">    UIApplicationShortcutIcon *icon1 = [UIApplicationShortcutIcon iconWithType:UIApplicationShortcutIconTypeSearch];</span><br><span class="line">    UIApplicationShortcutItem *shortItem1 = [[UIApplicationShortcutItem alloc] initWithType:@&quot;com.zhanggui.Demo.search&quot; localizedTitle:@&quot;搜索&quot; localizedSubtitle:@&quot;搜索想要的电影&quot; icon:icon1 userInfo:nil];</span><br><span class="line">    [shortCutItemArr addObject:shortItem1];</span><br><span class="line">    [UIApplication sharedApplication].shortcutItems = shortCutItemArr;</span><br><span class="line">    return YES;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>设置shortcutItems即可。  </p>
<h5 id="Dynamic-quick-actions"><a href="#Dynamic-quick-actions" class="headerlink" title="Dynamic quick actions"></a>Dynamic quick actions</h5><p>直接使用Info.plist文件配置：  </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">key</span>&gt;</span>UIApplicationShortcutItemIconType<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">string</span>&gt;</span>UIApplicationShortcutIconTypeShare<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">key</span>&gt;</span>UIApplicationShortcutItemTitle<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">string</span>&gt;</span>取票码<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">key</span>&gt;</span>UIApplicationShortcutItemType<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">string</span>&gt;</span>com.zhanggui.Demo.getTicket<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">key</span>&gt;</span>UIApplicationShortcutItemUserInfo<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dict</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">key</span>&gt;</span>key2<span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">string</span>&gt;</span>value2<span class="tag">&lt;/<span class="name">string</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dict</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>关于key值的介绍，可以参见<a href="https://developer.apple.com/library/archive/documentation/General/Reference/InfoPlistKeyReference/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009247" target="_blank" rel="noopener">Info.plist Keys and Values</a>。<br>处理点击元素监听：   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (void)application:(UIApplication *)application performActionForShortcutItem:(UIApplicationShortcutItem *)shortcutItem completionHandler:(void (^)(BOOL))completionHandler &#123;</span><br><span class="line">    NSLog(@&quot;%@&quot;,shortcutItem);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在AppDelegate中实现协议application:performActionForShortcutItem:completionHandler:方法即可。  </p>
<h4 id="核心类说明"><a href="#核心类说明" class="headerlink" title="核心类说明"></a>核心类说明</h4><p>UIApplicationShortcutItem：3D Touch弹框中每一条操作元素。<br>UIApplicationShortcutIcon：操作元素的icon。    </p>
<h5 id="UIApplicationShortcutItem"><a href="#UIApplicationShortcutItem" class="headerlink" title="UIApplicationShortcutItem"></a>UIApplicationShortcutItem</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line">#if USE_UIKIT_PUBLIC_HEADERS || !__has_include(&lt;UIKitCore/UIApplicationShortcutItem.h&gt;)</span><br><span class="line">//</span><br><span class="line">//  UIApplicationShortcutItem.h</span><br><span class="line">//  UIKit</span><br><span class="line">//</span><br><span class="line">//  Copyright © 2015-2018 Apple Inc. All rights reserved.</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">#import &lt;Foundation/Foundation.h&gt;</span><br><span class="line">#import &lt;UIKit/UIKitDefines.h&gt;</span><br><span class="line"></span><br><span class="line">NS_ASSUME_NONNULL_BEGIN</span><br><span class="line"></span><br><span class="line">@class UIImage;</span><br><span class="line"></span><br><span class="line">typedef NS_ENUM(NSInteger, UIApplicationShortcutIconType) &#123;</span><br><span class="line">    UIApplicationShortcutIconTypeCompose,</span><br><span class="line">    UIApplicationShortcutIconTypePlay,</span><br><span class="line">    UIApplicationShortcutIconTypePause,</span><br><span class="line">    UIApplicationShortcutIconTypeAdd,</span><br><span class="line">    UIApplicationShortcutIconTypeLocation,</span><br><span class="line">    UIApplicationShortcutIconTypeSearch,</span><br><span class="line">    UIApplicationShortcutIconTypeShare,</span><br><span class="line">    UIApplicationShortcutIconTypeProhibit       NS_ENUM_AVAILABLE_IOS(9_1),</span><br><span class="line">    UIApplicationShortcutIconTypeContact        NS_ENUM_AVAILABLE_IOS(9_1),</span><br><span class="line">    UIApplicationShortcutIconTypeHome           NS_ENUM_AVAILABLE_IOS(9_1),</span><br><span class="line">    UIApplicationShortcutIconTypeMarkLocation   NS_ENUM_AVAILABLE_IOS(9_1),</span><br><span class="line">    UIApplicationShortcutIconTypeFavorite       NS_ENUM_AVAILABLE_IOS(9_1),</span><br><span class="line">    UIApplicationShortcutIconTypeLove           NS_ENUM_AVAILABLE_IOS(9_1),</span><br><span class="line">    UIApplicationShortcutIconTypeCloud          NS_ENUM_AVAILABLE_IOS(9_1),</span><br><span class="line">    UIApplicationShortcutIconTypeInvitation     NS_ENUM_AVAILABLE_IOS(9_1),</span><br><span class="line">    UIApplicationShortcutIconTypeConfirmation   NS_ENUM_AVAILABLE_IOS(9_1),</span><br><span class="line">    UIApplicationShortcutIconTypeMail           NS_ENUM_AVAILABLE_IOS(9_1),</span><br><span class="line">    UIApplicationShortcutIconTypeMessage        NS_ENUM_AVAILABLE_IOS(9_1),</span><br><span class="line">    UIApplicationShortcutIconTypeDate           NS_ENUM_AVAILABLE_IOS(9_1),</span><br><span class="line">    UIApplicationShortcutIconTypeTime           NS_ENUM_AVAILABLE_IOS(9_1),</span><br><span class="line">    UIApplicationShortcutIconTypeCapturePhoto   NS_ENUM_AVAILABLE_IOS(9_1),</span><br><span class="line">    UIApplicationShortcutIconTypeCaptureVideo   NS_ENUM_AVAILABLE_IOS(9_1),</span><br><span class="line">    UIApplicationShortcutIconTypeTask           NS_ENUM_AVAILABLE_IOS(9_1),</span><br><span class="line">    UIApplicationShortcutIconTypeTaskCompleted  NS_ENUM_AVAILABLE_IOS(9_1),</span><br><span class="line">    UIApplicationShortcutIconTypeAlarm          NS_ENUM_AVAILABLE_IOS(9_1),</span><br><span class="line">    UIApplicationShortcutIconTypeBookmark       NS_ENUM_AVAILABLE_IOS(9_1),</span><br><span class="line">    UIApplicationShortcutIconTypeShuffle        NS_ENUM_AVAILABLE_IOS(9_1),</span><br><span class="line">    UIApplicationShortcutIconTypeAudio          NS_ENUM_AVAILABLE_IOS(9_1),</span><br><span class="line">    UIApplicationShortcutIconTypeUpdate         NS_ENUM_AVAILABLE_IOS(9_1)</span><br><span class="line">&#125; API_AVAILABLE(ios(9.0)) API_UNAVAILABLE(tvos) API_UNAVAILABLE(macos);</span><br><span class="line"></span><br><span class="line">UIKIT_EXTERN API_AVAILABLE(ios(9.0)) API_UNAVAILABLE(tvos) API_UNAVAILABLE(macos)</span><br><span class="line">@interface UIApplicationShortcutIcon : NSObject &lt;NSCopying&gt;</span><br><span class="line"></span><br><span class="line">// Create an icon using a system-defined image.</span><br><span class="line">+ (instancetype)iconWithType:(UIApplicationShortcutIconType)type;</span><br><span class="line"></span><br><span class="line">// Create an icon from a custom image.</span><br><span class="line">// The provided image named will be loaded from the app&apos;s bundle</span><br><span class="line">// and will be masked to conform to the system-defined icon style.</span><br><span class="line">+ (instancetype)iconWithTemplateImageName:(NSString *)templateImageName;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">UIKIT_EXTERN API_AVAILABLE(ios(9.0)) API_UNAVAILABLE(tvos) API_UNAVAILABLE(macos)</span><br><span class="line">@interface UIApplicationShortcutItem : NSObject &lt;NSCopying, NSMutableCopying&gt;</span><br><span class="line"></span><br><span class="line">- (instancetype)init NS_UNAVAILABLE;</span><br><span class="line">- (instancetype)initWithType:(NSString *)type localizedTitle:(NSString *)localizedTitle localizedSubtitle:(nullable NSString *)localizedSubtitle icon:(nullable UIApplicationShortcutIcon *)icon userInfo:(nullable NSDictionary&lt;NSString *, id &lt;NSSecureCoding&gt;&gt; *)userInfo NS_DESIGNATED_INITIALIZER;</span><br><span class="line">- (instancetype)initWithType:(NSString *)type localizedTitle:(NSString *)localizedTitle;</span><br><span class="line"></span><br><span class="line">// An application-specific string that identifies the type of action to perform.</span><br><span class="line">@property (nonatomic, copy, readonly) NSString *type;</span><br><span class="line"></span><br><span class="line">// Properties controlling how the item should be displayed on the home screen.</span><br><span class="line">@property (nonatomic, copy, readonly) NSString *localizedTitle;</span><br><span class="line">@property (nullable, nonatomic, copy, readonly) NSString *localizedSubtitle;</span><br><span class="line">@property (nullable, nonatomic, copy, readonly) UIApplicationShortcutIcon *icon;</span><br><span class="line"></span><br><span class="line">// Application-specific information needed to perform the action.</span><br><span class="line">// Will throw an exception if the NSDictionary is not plist-encodable.</span><br><span class="line">@property (nullable, nonatomic, copy, readonly) NSDictionary&lt;NSString *, id &lt;NSSecureCoding&gt;&gt; *userInfo;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">UIKIT_EXTERN API_AVAILABLE(ios(9.0)) API_UNAVAILABLE(tvos) API_UNAVAILABLE(macos)</span><br><span class="line">@interface UIMutableApplicationShortcutItem : UIApplicationShortcutItem</span><br><span class="line"></span><br><span class="line">// An application-specific string that identifies the type of action to perform.</span><br><span class="line">@property (nonatomic, copy) NSString *type;</span><br><span class="line"></span><br><span class="line">// Properties controlling how the item should be displayed on the home screen.</span><br><span class="line">@property (nonatomic, copy) NSString *localizedTitle;</span><br><span class="line">@property (nullable, nonatomic, copy) NSString *localizedSubtitle;</span><br><span class="line">@property (nullable, nonatomic, copy) UIApplicationShortcutIcon *icon;</span><br><span class="line"></span><br><span class="line">// Application-specific information needed to perform the action.</span><br><span class="line">// Will throw an exception if the NSDictionary is not plist-encodable.</span><br><span class="line">@property (nullable, nonatomic, copy) NSDictionary&lt;NSString *, id &lt;NSSecureCoding&gt;&gt; *userInfo;</span><br><span class="line"></span><br><span class="line">@end</span><br><span class="line"></span><br><span class="line">NS_ASSUME_NONNULL_END</span><br><span class="line"></span><br><span class="line">#else</span><br><span class="line">#import &lt;UIKitCore/UIApplicationShortcutItem.h&gt;</span><br><span class="line">#endif</span><br></pre></td></tr></table></figure>
<p>常用方法：<br>创建一个UIApplicationShortcutItem：   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">- (instancetype)initWithType:(NSString *)type localizedTitle:(NSString *)localizedTitle localizedSubtitle:(nullable NSString *)localizedSubtitle icon:(nullable UIApplicationShortcutIcon *)icon userInfo:(nullable NSDictionary&lt;NSString *, id &lt;NSSecureCoding&gt;&gt; *)userInfo NS_DESIGNATED_INITIALIZER;</span><br><span class="line"> </span><br><span class="line">- (instancetype)initWithType:(NSString *)type localizedTitle:(NSString *)localizedTitle;</span><br></pre></td></tr></table></figure>
<p>其中：  </p>
<ul>
<li>type代表：必传，app定义的主屏幕快速操作类型，<strong>可以用于确定某元素点击</strong>。</li>
<li>localizedTitle：展示的title</li>
<li>localizedSubtitle：sub title</li>
<li>icon：该item左侧或者右侧的icon，类型为UIApplicationShortcutIcon</li>
<li>userInfo:用户自定义的一些信息</li>
</ul>
<h5 id="UIApplicationShortcutIcon"><a href="#UIApplicationShortcutIcon" class="headerlink" title="UIApplicationShortcutIcon"></a>UIApplicationShortcutIcon</h5><p>icon有两种获取方式：一种是使用系统自带的类型，一种是用户自定义（根据图片名）。  </p>
<h6 id="系统自带类型"><a href="#系统自带类型" class="headerlink" title="系统自带类型"></a>系统自带类型</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// Create an icon using a system-defined image.</span><br><span class="line">+ (instancetype)iconWithType:(UIApplicationShortcutIconType)type;</span><br></pre></td></tr></table></figure>
<p>系统自带类型包括以下几种：   </p>
<p><img src="https://raw.githubusercontent.com/ScottZg/MarkDownResource/feature/addrubyimagefile/3DTouch/iconType.png" alt="系统自带icon类型"></p>
<h6 id="用户自定义"><a href="#用户自定义" class="headerlink" title="用户自定义"></a>用户自定义</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// Create an icon from a custom image.</span><br><span class="line">// The provided image named will be loaded from the app&apos;s bundle</span><br><span class="line">// and will be masked to conform to the system-defined icon style.</span><br><span class="line">+ (instancetype)iconWithTemplateImageName:(NSString *)templateImageName;</span><br></pre></td></tr></table></figure>
<p>用户自定义的图片格式规定如下：  </p>
<blockquote>
<p>square, single color, and 35x35 points（正方形、单色、35*35大小）</p>
</blockquote>
<p>如果图片找不到，则展示为原点。效果可自己测试一下。   </p>
<h4 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h4><ol>
<li>直接使用Info.plist文件进行配置  </li>
<li>直接编写代码  </li>
</ol>
<p>当同时使用两者时，会进行叠加，并且Info.plist配置中的元素会优先于AppDelegate中配置的元素展示。  </p>
<h4 id="个数限制"><a href="#个数限制" class="headerlink" title="个数限制"></a>个数限制</h4><p><strong>常规情况下，最多可以自定义4个Home screen quick action。在APP未上线之前，可以看到自定义的4个,多余的将会被忽略。在APP上线之后，将会有一个系统自带的item：分享 “APP名称”。总共不超过5个。</strong>  </p>
<h4 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h4><p>能够进行快捷操作的事件，比如微信的扫一扫，微信支付、我的电影票等。  </p>
<h3 id="UIKit-peek-and-pop-API-预览和跳转"><a href="#UIKit-peek-and-pop-API-预览和跳转" class="headerlink" title="UIKit peek and pop API(预览和跳转)"></a>UIKit peek and pop API(预览和跳转)</h3><p>UIKit的peek和pop API允许开发者在维护用户上下文的同时，在应用中提供对附加内容的轻松访问。使用peek quick actions可以为应用的触摸和按住操作提供按下的替换。<br>peek：当用户点击特定的view，会提供一个额外的预览视图。<br>pop：确认查看该内容，并且导航到该内容详情。<br>在iOS9以及以后的SDK中，为UIViewController提供了注册3D Touch和取消注册3D Touch的新方法，它们是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">// Registers a view controller to participate with 3D Touch preview (peek) and commit (pop).</span><br><span class="line">- (id &lt;UIViewControllerPreviewing&gt;)registerForPreviewingWithDelegate:(id&lt;UIViewControllerPreviewingDelegate&gt;)delegate sourceView:(UIView *)sourceView NS_AVAILABLE_IOS(9_0);</span><br><span class="line">- (void)unregisterForPreviewingWithContext:(id &lt;UIViewControllerPreviewing&gt;)previewing NS_AVAILABLE_IOS(9_0);</span><br></pre></td></tr></table></figure></p>
<p>在注册方法中，sourceView就是要添加3D Touch的view。调用该注册方法的时候，它做了三件事：  </p>
<ul>
<li>注册调用该方法的控制器参与3D Touch的预览（preview）和执行（commit）</li>
<li>从接收方的视图层级结构中，将sourceView指定为响应强按压的视图</li>
<li>指定委托对象，当用户进行强按压时依次请求peek和pop，该委托对象用于协调操作（vc实现了peek和pop代理方法）</li>
</ul>
<blockquote>
<p>You can designate more than one source view for a single registered view controller, but you cannot designate a single view as a source view more than once.</p>
</blockquote>
<p>你可以在一个vc中指定多个sourceView，但是不能同一个view指定为sourceView多次。<br>注册方法返回的上下文对象的生命周期由系统管理。如果你需要指明取消注册该vc，把该context对象传给unregisterForPreviewingWithContext:。如果开发者不取消注册，系统会在改VC释放的时候自动取消注册。<br>Demo中的注册方法实现如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if ([self.imageView respondsToSelector:@selector(traitCollection)]) &#123;</span><br><span class="line">    if([self.traitCollection respondsToSelector:@selector(forceTouchCapability)]) &#123;</span><br><span class="line">        if (self.traitCollection.forceTouchCapability == UIForceTouchCapabilityAvailable) &#123;</span><br><span class="line">            [self registerForPreviewingWithDelegate:(id)self sourceView:self.imageView];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>注册完成之后，需要实现UIViewControllerPreviewingDelegate，该代理主要有两个方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- (void)previewingContext:(id&lt;UIViewControllerPreviewing&gt;)previewingContext commitViewController:(UIViewController *)viewControllerToCommit &#123;</span><br><span class="line">    ImageViewController *imageVC = [[UIStoryboard storyboardWithName:@&quot;Main&quot; bundle:nil] instantiateViewControllerWithIdentifier:@&quot;ImageVC&quot;];</span><br><span class="line">    [self presentViewController:imageVC animated:YES completion:nil];</span><br><span class="line">&#125;</span><br><span class="line">- (UIViewController *)previewingContext:(id&lt;UIViewControllerPreviewing&gt;)previewingContext viewControllerForLocation:(CGPoint)location &#123;</span><br><span class="line">    ImageViewController *imageVC = [[UIStoryboard storyboardWithName:@&quot;Main&quot; bundle:nil] instantiateViewControllerWithIdentifier:@&quot;ImageVC&quot;];</span><br><span class="line">    imageVC.preferredContentSize = CGSizeMake(0.0, 300);</span><br><span class="line">    return imageVC;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>第一个方法用于处理commit操作，也就是确认操作，确认3D Touch执行操作。<br>第二个方法在用户按下源视图显示peek时调用，实现此方法用以返回预览视图控制器。（这里返回的是ImageViewController）。如果此处返回nil，将会禁用预览。此处还会使用到<strong>previewingContext.sourceReact</strong>，该属性主要是在sourceView坐标系中，矩形响应用户的3D触摸，当矩形周会内容模糊时，矩形在视觉上保持清晰，具体可参见视频：  <a href="https://github.com/ScottZg/MarkDownResource/blob/feature/addrubyimagefile/3DTouch/sourcReact.MP4" target="_blank" rel="noopener">https://github.com/ScottZg/MarkDownResource/blob/feature/addrubyimagefile/3DTouch/sourcReact.MP4</a></p>
<h4 id="快速操作"><a href="#快速操作" class="headerlink" title="快速操作"></a>快速操作</h4><p>可以使用该API进行快速操作需求开发，例如微信重压聊天列表中的某个cell，就可以弹出快速操作：不再关注、删除。这些快速操作很简单：在预览的VC中添加下面的代码即可。实例代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">- (NSArray&lt;id&lt;UIPreviewActionItem&gt;&gt; *)previewActionItems &#123;</span><br><span class="line">    NSMutableArray *arrItem = [NSMutableArray arrayWithCapacity:2];</span><br><span class="line">    UIPreviewAction *cancel = [UIPreviewAction actionWithTitle:@&quot;取消&quot; style:UIPreviewActionStyleDefault handler:^(UIPreviewAction * _Nonnull action, UIViewController * _Nonnull previewViewController) &#123;</span><br><span class="line">        NSLog(@&quot;cancel&quot;);</span><br><span class="line">    &#125;];</span><br><span class="line">    UIPreviewAction *ok = [UIPreviewAction actionWithTitle:@&quot;删除&quot; style:UIPreviewActionStyleDestructive handler:^(UIPreviewAction * _Nonnull action, UIViewController * _Nonnull previewViewController) &#123;</span><br><span class="line">        self.imageView.image = nil;</span><br><span class="line">    &#125;];</span><br><span class="line">    </span><br><span class="line">    UIPreviewAction *select = [UIPreviewAction actionWithTitle:@&quot;选中&quot; style:UIPreviewActionStyleSelected handler:^(UIPreviewAction * _Nonnull action, UIViewController * _Nonnull previewViewController) &#123;</span><br><span class="line">        NSLog(@&quot;selected&quot;);</span><br><span class="line">    &#125;];</span><br><span class="line">//    组操作</span><br><span class="line">    UIPreviewAction *add = [UIPreviewAction actionWithTitle:@&quot;增加&quot; style:UIPreviewActionStyleDefault handler:^(UIPreviewAction * _Nonnull action, UIViewController * _Nonnull previewViewController) &#123;</span><br><span class="line">        NSLog(@&quot;增加&quot;);</span><br><span class="line">    &#125;];</span><br><span class="line">    UIPreviewAction *update = [UIPreviewAction actionWithTitle:@&quot;更新&quot; style:UIPreviewActionStyleDefault handler:^(UIPreviewAction * _Nonnull action, UIViewController * _Nonnull previewViewController) &#123;</span><br><span class="line">        NSLog(@&quot;更新&quot;);</span><br><span class="line">    &#125;];</span><br><span class="line">    UIPreviewActionGroup *group = [UIPreviewActionGroup actionGroupWithTitle:@&quot;更多操作&quot; style:UIPreviewActionStyleDefault actions:@[add,update]];</span><br><span class="line">    [arrItem addObject:cancel];</span><br><span class="line">    [arrItem addObject:ok];</span><br><span class="line">    [arrItem addObject:select];</span><br><span class="line">    [arrItem addObject:group];</span><br><span class="line">    return arrItem;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这里主要实现了previewActionItems方法，用来设置预览的Action元素，这里涉及到的类有：     </p>
<ul>
<li>UIPreviewAction：预览的Action，当用户在支持3D Touch并且在peek视图下向上滑动，即可看到这些Action。</li>
<li>UIPreviewActionItem：协议，包含了一个只读的title。</li>
<li>UIPreviewActionGroup：操作组，可以设置一个操作组进行操作，例如二次确认。</li>
</ul>
<h5 id="UIPreviewAction"><a href="#UIPreviewAction" class="headerlink" title="UIPreviewAction"></a>UIPreviewAction</h5><p>具体的操作元素，包括title、类型以及事件处理。其中style有以下三种类型：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">typedef NS_ENUM(NSInteger,UIPreviewActionStyle) &#123;</span><br><span class="line">    UIPreviewActionStyleDefault=0,  //默认</span><br><span class="line">    UIPreviewActionStyleSelected,  //选中</span><br><span class="line">    UIPreviewActionStyleDestructive,  //销毁：红色</span><br><span class="line">&#125; NS_ENUM_AVAILABLE_IOS(9_0);</span><br></pre></td></tr></table></figure>
<h5 id="UIPreviewActionItem"><a href="#UIPreviewActionItem" class="headerlink" title="UIPreviewActionItem"></a>UIPreviewActionItem</h5><p>协议，包含了一个属性title。代表操作action的title。   </p>
<h4 id="UIPreviewActionGroup"><a href="#UIPreviewActionGroup" class="headerlink" title="UIPreviewActionGroup"></a>UIPreviewActionGroup</h4><p>操作组，支持一个元素多个操作，具体可以参见下面的小视频：<a href="https://github.com/ScottZg/MarkDownResource/blob/feature/addrubyimagefile/3DTouch/group.MP4" target="_blank" rel="noopener">https://github.com/ScottZg/MarkDownResource/blob/feature/addrubyimagefile/3DTouch/group.MP4</a></p>
<h3 id="Web-view-peek-and-pop-API"><a href="#Web-view-peek-and-pop-API" class="headerlink" title="Web view peek and pop API"></a>Web view peek and pop API</h3><p>在网页中，对于网页中的链接，peek和pop是默认支持的，可以通过设置allowsLinkPreview进行开启或关闭：<br>WKWebView:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/*! @abstract A Boolean value indicating whether link preview is allowed for any</span><br><span class="line"> links inside this WKWebView.</span><br><span class="line"> @discussion The default value is YES on Mac and iOS.</span><br><span class="line"> */</span><br><span class="line">@property (nonatomic) BOOL allowsLinkPreview API_AVAILABLE(macosx(10.11), ios(9.0));</span><br></pre></td></tr></table></figure></p>
<p>UIWebView：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@property (nonatomic) BOOL allowsLinkPreview NS_AVAILABLE_IOS(9_0); // default is NO</span><br></pre></td></tr></table></figure>
<p>默认情况下使用苹果自带的浏览器打开，这样就会跳出自己的应用。<br>尝试自己对wkwebview进行注册，然后自己设置peek和pop，发现无效。<br>可以使用SFSafariViewController替代WebView。  </p>
<blockquote>
<p>SFSafariViewController使用presentViewController:animated:completion:方法展示。效果和push一样。</p>
</blockquote>
<h3 id="UITouch-force-properties"><a href="#UITouch-force-properties" class="headerlink" title="UITouch force properties"></a>UITouch force properties</h3><p><a href="https://developer.apple.com/documentation/uikit/uitouch?language=objc" target="_blank" rel="noopener">UITouch</a>类提供了两个新的属性来支持自定义实现3D Touch：  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// Force of the touch, where 1.0 represents the force of an average touch</span><br><span class="line">@property(nonatomic,readonly) CGFloat force NS_AVAILABLE_IOS(9_0);</span><br><span class="line">// Maximum possible force with this input mechanism</span><br><span class="line">@property(nonatomic,readonly) CGFloat maximumPossibleForce NS_AVAILABLE_IOS(9_0);</span><br></pre></td></tr></table></figure>
<p>具体使用可以参见<a href="https://github.com/ScottZg/3DTouch" target="_blank" rel="noopener">Demo</a>。  </p>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><ol>
<li><a href="https://developer.apple.com/library/archive/documentation/UserExperience/Conceptual/Adopting3DTouchOniPhone/index.html#//apple_ref/doc/uid/TP40016543-CH1-SW1" target="_blank" rel="noopener">Adopting 3D Touch on iPhone</a></li>
<li><a href="https://developer.apple.com/ios/3d-touch/" target="_blank" rel="noopener">https://developer.apple.com/ios/3d-touch/</a></li>
<li><a href="https://developer.apple.com/documentation/uikit/uiviewcontroller/1621463-registerforpreviewingwithdelegat" target="_blank" rel="noopener">registerForPreviewingWithDelegate</a></li>
</ol>
</div><div class="tags"><a href="/tags/3D-Touch/">3D Touch</a></div><div class="post-nav"><a class="next" href="/2019/01/18/git-branch-standard/">Git分支管理规范</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://supermokey.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/iOS/">iOS</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/LinkMapFile/" style="font-size: 15px;">LinkMapFile</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/编译型语言/" style="font-size: 15px;">编译型语言</a> <a href="/tags/字节码/" style="font-size: 15px;">字节码</a> <a href="/tags/Ruby/" style="font-size: 15px;">Ruby</a> <a href="/tags/Xcode/" style="font-size: 15px;">Xcode</a> <a href="/tags/Accessibility/" style="font-size: 15px;">Accessibility</a> <a href="/tags/解释型语言/" style="font-size: 15px;">解释型语言</a> <a href="/tags/iOS/" style="font-size: 15px;">iOS</a> <a href="/tags/WebDriverAgent/" style="font-size: 15px;">WebDriverAgent</a> <a href="/tags/LivePhoto/" style="font-size: 15px;">LivePhoto</a> <a href="/tags/HEVC/" style="font-size: 15px;">HEVC</a> <a href="/tags/HEIF/" style="font-size: 15px;">HEIF</a> <a href="/tags/3D-Touch/" style="font-size: 15px;">3D Touch</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/03/15/3d-touch-guide/">你想知道的3D Touch开发全在这里了</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/18/git-branch-standard/">Git分支管理规范</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/01/16/ruby/">Ruby入坑指南</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/12/21/interpreted-vs-compiled/">解释型语言、编译型语言</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/20/link-map-file-known/">对Link Map File的初步认识</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/28/create-own-gem/">RubyGems系列之创建自己的gem</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/28/rubygems-know/">RubyGems系列之RubyGems初识</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/09/21/xcode10-feature/">关于Xcode10的那些事</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/05/wda/">WebDriverAgent入门篇-安装和使用</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/08/05/live-photo-guide/">LivePhoto开发指南</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 超链接</i></div><ul></ul><a href="http://cnblogs.com/zhanggui" title="我的博客园" target="_blank">我的博客园</a><ul></ul><a href="http://www.zhaoyafei.cn" title="赵亚飞的博客" target="_blank">赵亚飞的博客</a><ul></ul><a href="http://www.maoyan.com" title="猫眼电影" target="_blank">猫眼电影</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">我不是掌柜.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>